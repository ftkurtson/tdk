{% if plugins.ecommerce.products|length or plugins.ecommerce.filteredProducts|length %}
<section class="ecom-productslist-products">
    {% if plugins.ecommerce.filteredProducts|length %}
        {% set products = plugins.ecommerce.filteredProducts %}
    {% else %}
        {% set products = plugins.ecommerce.products %}
    {% endif %}

    {% for product in products %}
    <article class="ecom-productslist-product">
        {% if product.assets is not null %}
            {% for asset in product.assets %}
                {% if plugins.assets.images[asset.assetRef].fileType == 'image' %}
                    {% set imageSrc = plugins.assets.images[asset.assetRef].url %}
                    <a class="ecom-productslist-image-wrap" style="background-image:url('{{ imageSrc }}')" href="{{ requestBase }}/store/product/{{product.ref}}" title="{{product.title}}">
                        <img class="ecom-productslist-image" src="{{imageSrc}}">
                    </a>
                {% endif %}
            {% endfor %}
        {% endif %}

        <div class="ecom-productlist-info">
            <h2 class="ecom-productslist-title"><a href="{{ requestBase }}/store/product/{{product.ref}}">{{product.title}}</a></h2>
            <span class="ecom-productlist-price">
                {% if product.multiplePrices %}
                    {{ "shared_views.ecom-products-list.minimum_price" | translate("From %1", product.formattedPrice) }}
                {% else %}
                    {{ product.formattedPrice }}
                {% endif %}
            </span>
        </div>

    </article>
    {% endfor%}
{% else %}
    <p>There aren't any products to display.</p>
{% endif %}
