{% set minWidth = '999999' %}
{% set minHeight = '999999' %}
{% set images = [] %}

{% if data.albumRef != 0 and plugins.assets.albums[data.albumRef]|length > 0 %}
    {% set images = plugins.assets.albums[data.albumRef] %}
{% elseif data.images|length > 0 %}
    {% set images = data.images %}
{% endif %}

{% if images|length > 0 %}
<ul class="gallery-widget">
    {% for key, image in images %}
        {% if data.albumRef != 0 and plugins.assets.albums[data.albumRef]|length > 0 %}
            {% set image = plugins.assets.images[image] %}
        {% endif %}
       
        {% if image.imageWidth == image.imageHeight %}
            {% set aspectClass = 'square' %}
        {% endif %}

        {% if image.imageWidth > image.imageHeight %}
            {% set aspectClass = 'landscape' %}
        {% endif %}

        {% if image.imageWidth < image.imageHeight %}
            {% set aspectClass = 'portrait' %}
        {% endif %}

        <li class="{{aspectClass}}">
            <span class="inner" style="background-image:url('{{image.url}}');">
                <a class="" href="#" image-href="{{image.url}}" data-lightbox="set-{{image.albumRef}}" title="{{image.title}}">
                    <img src="{{image.url}}"/>
                    {% if image.title != '' %}
                    <span class="title" {% if data.showTitle == 0%} style="display: none" {% endif %}>{{image.title}}</span>
                    {% endif %}
                    {% if image.description != '' %}
                    <span class="description" {% if data.showDescription == 0%} style="display: none" {% endif %}>{{image.description}}</span>
                    {% endif %}
                </a>
            </span>
        </li>
    {% endfor %}
</ul>    
{% else %}
    <p><b>{{"widgets.gallery.no_images"|translate("No Images")}}</b></p>
    <p>{{"widgets.gallery.no_images_text"|translate("In order to use the gallery widget, you need to select an album. If you have no albums please upload images under the Images panel, or organize your images into albums by going to your Manage section.")|raw}}</p>
{% endif %}